{%- if closest.product != blank -%}
  {%- liquid
    assign heading = block.settings.heading
    assign description = block.settings.description
  -%}
  <div class="ask-question">
    <div class="ask-info">
      {% if heading %}
        <div class="heading h7 flex gap-10 mb-sp-2">
          <svg width="24" height="24" fill="none" class="flex-auto w-custom" style="--width: var(--sp-6);">
            <path stroke="#1D1D1F" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m18.472 16.829.39 3.16c.1.83-.79 1.41-1.5.98l-4.19-2.49c-.46 0-.91-.03-1.35-.09a4.86 4.86 0 0 0 1.18-3.16c0-2.84-2.46-5.14-5.5-5.14-1.16 0-2.23.33-3.12.91-.03-.25-.04-.5-.04-.76 0-4.55 3.95-8.24 8.83-8.24s8.83 3.69 8.83 8.24c0 2.7-1.39 5.09-3.53 6.59Z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.002 15.23c0 1.19-.44 2.29-1.18 3.16-.99 1.2-2.56 1.97-4.32 1.97l-2.61 1.55c-.44.27-1-.1-.94-.61l.25-1.97c-1.34-.93-2.2-2.42-2.2-4.1 0-1.76.94-3.31 2.38-4.23.89-.58 1.96-.91 3.12-.91 3.04 0 5.5 2.3 5.5 5.14Z"/>
          </svg>
          <span>{{ block.settings.heading }}</span>
        </div>
      {% endif %}
      <div class="description" {{ block.shopify_attributes }}>
        {% if description %}
          <span>{{ block.settings.description }}</span>
        {% endif %}
        <button
          class="btn-reset pointer inline-block btn-link border-animation body_weight lh-1"
          id="ask-question"
          is="ask-question"
        >
          {{ 'products.product.ask_question' | t }}
        </button>
      </div>
    </div>
    <div class="popup-ask-question d-none">
      <template>
        <ask-question-popup class="modal modal_type_popup active-modal-js fixed inset-0 z-22 w-full flex align-center invisible-1025 transition-drawer">
          <modal-overlay class="modal-overlay invisible transition-drawer cursor-crosshair"></modal-overlay>
          <div
            class="modal-popup-inner w-full invisible-1025 flex column modal-focus transition modal-draggable rounded max-w-custom m-auto z-15 bg-white"
            tabindex="-1"
            style="--max-width: 60rem;"
          >
            <draggable-modal
              class="drawer__header draggable-modal drawer__header-cart flex gap-10 space-between align-center drawer-spacing border-bottom sticky"
              style="--padding-block-desktop: 1.7rem;--padding-block:1.2rem;--padding-inline-desktop:3.2rem;"
            >
              <div class="drawer__heading h5 flex gap align-center" style="--gap-desktop: 8px;--gap: 8px">
                {{ 'products.product.ask_question' | t }}
              </div>
              <button
                is="button-close-model"
                class="modal__close modal-button-close rounded-50 pointer btn-reset h-full flex content-center"
                aria-label="Close"
              >
                <svg
                  width="12"
                  height="12"
                  viewBox="0 0 14 14"
                  fill="none"
                  class="transition-short will-change icon-zoom"
                >
                  <use href="#icon-close"></use>
                </svg>
              </button>
            </draggable-modal>
            <div class="drawer__body grow-1 h-full overflow-y-auto custom-scrollbar drawer-spacing">
              {%- render 'ask-question-form' -%}
            </div>
          </div>
        </ask-question-popup>
      </template>
    </div>
  </div>
{%- endif -%}
{% schema %}
{
  "name": "t:sections.all.product_setting.ask_question.name",
  "class": "block-product__ask-question my-custom slideIn-animate",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.all.product_setting.promotion_alert.heading.label",
      "default": "Ask a question"
    },
    {
      "type": "text",
      "id": "description",
      "default": "Help Center",
      "label": "t:sections.all.product_setting.promotion_alert.description.label"
    }
  ],
  "presets": [{ "name": "t:sections.all.product_setting.ask_question.name" }]
}
{% endschema %}
