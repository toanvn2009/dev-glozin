{% comment %}
  This file is auto-generated by Foxify.
  This file can be re-written at any time. Please do not update this file directly.
{% endcomment %}
{%- liquid
  assign locales = shop.metafields.foxify.locales.value
  assign current_locale = request.locale.iso_code
  assign primary_locale = current_locale
  for locale in shop.published_locales
    if locale.primary
      assign primary_locale = locale.iso_code
      break
    endif
  endfor
  assign translation = locales[current_locale] | default: locales[primary_locale]

  assign prefix_class = prefix_class | default: 'f:'
  assign prefix_element = prefix_element | default: 'f'
  assign show_count = show_product_count | default: true

  assign results = collection
  assign sort_by = results.sort_by | default: results.default_sort_by
  assign total_active_values = 0
  assign default_presentation = 'text'

  assign is_gen2 = false
  if prefix_class == 'x-'
    assign is_gen2 = true
  endif

  if results.url
    assign results_url = results.url
  else
    assign terms = results.terms | escape
    assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
  endif
-%}
{% unless is_gen2 %}
  {{ 'foxify-component-drawer.css' | asset_url | stylesheet_tag }}
{% endunless %}

<{{ prefix_element }}-drawer-component
  id='Drawer-Foxify-Facets'
  class='{{ prefix_class }}drawer {{ prefix_class }}drawer--left {{ prefix_class }}facets-container {{ prefix_class }}facets--{{ filter_type }}'
  aria-modal='true'
  role='dialog'
>
  <div class='{{ prefix_class }}drawer__overlay'></div>
  <div class='{{ prefix_class }}drawer__content focus-inset' tabindex='-1'>
    <div class='{{ prefix_class }}drawer__header'>
      <h2 class='{{ prefix_class }}facets__heading h3 {{ prefix_class }}drawer__header-title' tabindex='-1'>
        {{ translation.products.facets.filter_by_label }}
      </h2>
      <button id='FDrawerClose-Facets' class='{{ prefix_class }}drawer__close'>
        <svg
          xmlns='http://www.w3.org/2000/svg'
          aria-hidden='true'
          focusable='false'
          role='presentation'
          viewBox='0 0 24 24'
          fill='none'
          stroke='currentColor'
          stroke-width='2'
          stroke-linecap='round'
          stroke-linejoin='round'
        >
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class='{{ prefix_class }}drawer__scroller check-change-class'>
      <{{ prefix_element }}-facet-filters-form class='{{ prefix_class }}facets'>
        <form id='FoxifyFacetFiltersForm' class='{{ prefix_class }}facets__form'>
          {%- if results.terms -%}
            <input type='hidden' name='q' value='{{ results.terms | escape }}'>
            <input name='options[prefix]' type='hidden' value='last'>
          {%- endif -%}

          {%- for filter in results.filters -%}
            {%- liquid
              assign total_active_values = total_active_values | plus: filter.active_values.size
              assign presentation = filter.presentation | default: default_presentation
            -%}

            {% case filter.type %}
              {% when 'boolean', 'list' %}
                {% liquid
                  assign filters_selected_one = translation.products.facets.filters_selected.one | replace: '{{ count }}', filter.active_values.size
                %}
                <details
                  id='Details-{{ forloop.index }}-{{ section.id }}'
                  class='{{ prefix_class }}facets__block js-filter'
                  data-index='{{ forloop.index }}'
                  {% if filter_type == 'vertical' and forloop.index == 1 %}
                    open
                  {% endif %}
                >
                  <summary class='{{ prefix_class }}facets__summary' aria-label='{{ filter.label }} ({{ filters_selected_one }})'>
                    <h5>
                      {{ filter.label | escape }}
                      <span class='{{ prefix_class }}facets__selected no-js-hidden{% if filter.active_values.size == 0 %} hidden{% endif %}'>
                        ({{ filter.active_values.size }})</span
                      >
                    </h5>
                    <svg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'>
                      <path d="M7 2.91669V11.0834" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                      <path d="M2.91675 7H11.0834" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </summary>
                  <div
                    id='Facet-{{ forloop.index }}-{{ section.id }}'
                    class='{{ prefix_class }}facets__block-options {{ prefix_class }}parent-display'
                  >
                    <fieldset class='{{ prefix_class }}facets-wrap'>
                      <legend class='{{ prefix_class }}visually-hidden'>{{ filter.label | escape }}</legend>
                      <ul class='no-js-hidden{% if presentation == 'image' %} {{ prefix_class }}facets-layout-grid{% endif %}' role='list'>
                        {%- for value in filter.values -%}
                          {% liquid
                            assign product_count_simple_one = translation.products.facets.product_count_simple.one | replace: '{{ count }}', value.count
                            assign product_count_simple_other = translation.products.facets.product_count_simple.other | replace: '{{ count }}', value.count
                            assign swatch = value.swatch
                          %}
                          <li class='{{ prefix_class }}facets__item{% if forloop.index > 10 %} {{ prefix_class }}show-more-item {{ prefix_class }}hidden{% endif %}{% if presentation == 'swatch' %} swatch-input-wrapper{% endif %}'>
                            <label
                              for='Filter-{{ filter.param_name | escape }}-{{ forloop.index }}'
                              class='{{ prefix_class }}checkbox{% if value.count == 0 and value.active == false %} {{ prefix_class }}checkbox--disabled{% endif %}'
                            >
                              <input
                                type='checkbox'
                                name='{{ value.param_name }}'
                                value='{{ value.value }}'
                                id='Filter-{{ filter.param_name | escape }}-{{ forloop.index }}'
                                {% if value.active %}
                                  checked
                                {% endif %}
                                {% if value.count == 0 and value.active == false %}
                                  disabled
                                {% endif %}
                              >

                              {%- case presentation -%}
                                {%- when 'swatch' -%}
                                  {%- liquid
                                    assign swatch_value = null
                                    if swatch.image
                                      assign image_url = swatch.image | image_url: width: 72
                                      assign swatch_value = 'url(' | append: image_url | append: ')'
                                      assign swatch_focal_point = swatch.image.presentation.focal_point
                                    elsif swatch.color
                                      assign swatch_value = 'rgb(' | append: swatch.color.rgb | append: ')'
                                    endif
                                  -%}
                                  <span
                                    {% if swatch_value %}
                                      class='{{ prefix_class }}checkbox__swatch'
                                      style='--swatch-background: {{ swatch_value }};{% if swatch_focal_point %} --swatch-focal-point: {{ swatch_focal_point }};{% endif %}'
                                    {% else %}
                                      class='{{ prefix_class }}checkbox__swatch swatch--unavailable'
                                    {% endif %}
                                  ></span>
                                  <span aria-hidden='true'>
                                    {{- value.label | escape }}
                                    {% if show_count %}({{ value.count }}){% endif -%}
                                  </span>
                                  <span class='{{ prefix_class }}visually-hidden'>
                                    {{- value.label | escape }} (
                                    {%- if value.count == 1 %}{{ product_count_simple_one }}{% else %}{{ product_count_simple_other }}{% endif -%}
                                    )</span
                                  >

                                {%- when 'image' -%}
                                  <div class='{{ prefix_class }}checkbox__image'>
                                    {%- if value.image -%}
                                      {{ value.image | image_url: width: 300 | image_tag: loading: 'lazy', fetchpriority: 'low', alt: value.alt }}
                                    {%- endif -%}
                                  </div>

                                {%- else -%}
                                  <span class='{{ prefix_class }}checkbox__checkmark'></span>
                                  <span aria-hidden='true'>
                                    {{- value.label | escape }}
                                    {% if show_count %}({{ value.count }}){% endif -%}
                                  </span>
                                  <span class='{{ prefix_class }}visually-hidden'>
                                    {{- value.label | escape }} (
                                    {%- if value.count == 1 %}{{ product_count_simple_one }}{% else %}{{ product_count_simple_other }}{% endif -%}
                                    )</span
                                  >
                              {% endcase %}
                            </label>
                          </li>
                        {%- endfor -%}
                      </ul>
                    </fieldset>
                    {%- if filter.values.size > 10 -%}
                      <{{ prefix_element }}-show-more-button>
                        <button
                          class='button-show-more no-js-hidden {{ prefix_class }}btn {{ prefix_class }}gs-link-button'
                          id='Show-More-{{ forloop.index }}-{{ section.id }}'
                          type='button'
                        >
                          <span class='label-show-more label-text'
                            ><span aria-hidden='true'>+ </span>{{ translation.products.facets.show_more -}}
                          </span>
                          <span class='label-show-less label-text {{ prefix_class }}hidden'
                            ><span aria-hidden='true'>- </span>{{ translation.products.facets.show_less -}}
                          </span>
                        </button>
                      </{{ prefix_element }}-show-more-button>
                    {%- endif %}
                  </div>
                </details>
              {% when 'price_range' %}
                {% liquid
                  assign currencies_using_comma_decimals = 'ANG,ARS,BRL,BYN,BYR,CLF,CLP,COP,CRC,CZK,DKK,EUR,HRK,HUF,IDR,ISK,MZN,NOK,PLN,RON,RUB,SEK,TRY,UYU,VES,VND' | split: ','
                  assign uses_comma_decimals = false
                  if currencies_using_comma_decimals contains cart.currency.iso_code
                    assign uses_comma_decimals = true
                  endif

                  assign max_price_amount = filter.range_max | money | strip_html | escape
                  assign max_price_label = translation.products.facets.max_price | replace: '{{ price }}', max_price_amount
                %}
                <details
                  id='Details-{{ forloop.index }}-{{ section.id }}'
                  class='{{ prefix_class }}facets__block js-filter'
                  data-index='{{ forloop.index }}'
                  {% if filter_type == 'vertical' and forloop.index == 1 %}
                    open
                  {% endif %}
                >
                  <summary class='{{ prefix_class }}facets__summary'>
                    <h5>
                      <span>{{ filter.label | escape }}</span>
                    </h5>
                    <svg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'>
                      <path d="M7 2.91669V11.0834" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                      <path d="M2.91675 7H11.0834" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </summary>
                  <div
                    id='Facet-{{ forloop.index }}-{{ section.id }}'
                    class='{{ prefix_class }}facets__block-options {{ prefix_class }}parent-display'
                  >
                    <div class='{{ prefix_class }}facets__header'>
                      <span class='{{ prefix_class }}facets__selected'>{{ max_price_label }}</span>
                    </div>
                    <{{ prefix_element }}-price-range class='{{ prefix_class }}facets__price'>
                      <div class='{{ prefix_class }}form-row' style='--gap: 16px;'>
                        <div class='{{ prefix_class }}form-field'>
                          <label class='{{ prefix_class }}form-label' for='Filter-{{ filter.label | escape }}-GTE'>
                            {{- translation.products.facets.from -}}
                          </label>
                          <div class='{{ prefix_class }}form-control__wrapper'>
                            <span class='{{ prefix_class }}form-control__prefix'>{{ cart.currency.symbol }}</span>
                            <input
                              class='{{ prefix_class }}form-control'
                              name='{{ filter.min_value.param_name }}'
                              id='Filter-{{ filter.label | escape }}-GTE'
                              {%- if filter.min_value.value -%}
                                {%- if uses_comma_decimals -%}
                                  value='{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}'
                                {%- else -%}
                                  value='{{ filter.min_value.value | money_without_currency | replace: ',', '' }}'
                                {%- endif %}
                              {%- endif -%}
                              type='number'
                              placeholder='0'
                              min='0'
                              {%- if uses_comma_decimals -%}
                                max='{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}'
                              {%- else -%}
                                max='{{ filter.range_max | money_without_currency | replace: ',', '' }}'
                              {% endif %}
                            >
                          </div>
                        </div>
                        <div class='{{ prefix_class }}form-field'>
                          <label class='{{ prefix_class }}form-label' for='Filter-{{ filter.label | escape }}-LTE'>
                            {{- translation.products.facets.to -}}
                          </label>
                          <div class='{{ prefix_class }}form-control__wrapper'>
                            <span class='{{ prefix_class }}form-control__prefix'>{{ cart.currency.symbol }}</span>
                            <input
                              class='{{ prefix_class }}form-control'
                              name='{{ filter.max_value.param_name }}'
                              id='Filter-{{ filter.label | escape }}-LTE'
                              {%- if filter.max_value.value -%}
                                {%- if uses_comma_decimals -%}
                                  value='{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}'
                                {%- else -%}
                                  value='{{ filter.max_value.value | money_without_currency | replace: ',', '' }}'
                                {%- endif %}
                              {%- endif -%}
                              type='number'
                              min='0'
                              {%- if uses_comma_decimals -%}
                                placeholder='{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}'
                                max='{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}'
                              {%- else -%}
                                placeholder='{{ filter.range_max | money_without_currency | replace: ',', '' }}'
                                max='{{ filter.range_max | money_without_currency | replace: ',', '' }}'
                              {% endif %}
                            >
                          </div>
                        </div>
                      </div>
                    </{{ prefix_element }}-price-range>
                  </div>
                </details>
            {% endcase %}
          {%- endfor -%}
        </form>
      </{{ prefix_element }}-facet-filters-form>
    </div>
    <div class='{{ prefix_class }}drawer__footer {{ prefix_class }}flex {{ prefix_class }}items-center {{ prefix_class }}justify-between'>
      <{{ prefix_element }}-facet-remove>
        <a
          href='{{ results_url }}'
          class='{{ prefix_class }}btn {{ prefix_class }}button {{ prefix_class }}gs-link-button'
          aria-label='{{ translation.products.facets.clear_all }}'
        >
          <span>{{ translation.products.facets.clear_all }}</span>
        </a>
      </{{ prefix_element }}-facet-remove>
      <{{ prefix_element }}-facet-submit>
        <button
          class='{{ prefix_class }}btn {{ prefix_class }}button {{ prefix_class }}gs-primary-button {{ prefix_class }}w-full'
          aria-label='{{ translation.products.facets.apply }}'
        >
          {{- translation.products.facets.apply -}}
        </button>
      </{{ prefix_element }}-facet-submit>
    </div>
  </div>
</{{ prefix_element }}-drawer-component>
