{% comment %}
This file is auto-generated by Foxify.
This file can be re-written at any time. Please do not update this file directly.
{% endcomment %}

{%- liquid
		assign element_key = ELEMENT_KEY | default: 'f'
		assign prefix_class = PREFIX_CLASS | default: 'f:'
    assign collectionCard = ''
    assign theme_settings = shop.metafields.foxify.theme_settings.value
    if theme_settings != blank
        assign collectionCard = theme_settings['collectionCard']
    endif

    assign collection_image = blank
    if image != blank
      assign collection_image = image
    else
      if collection.image
          assign collection_image = collection.image
      elsif collection.products.first and collection.products.first.images != empty
          assign collection_image = collection.products.first.featured_image
      else
          assign collection_image = blank
      endif
    endif

    assign ratio = image_ratio
    assign cardStyle = card_style
    assign backgroundColor = ''

    if cardStyle == nil or cardStyle == 'inherit'
        assign cardStyle = collectionCard.style
    endif

		if text_align == '' or text_align == null or text_align == 'undefined'
				assign text_align = collectionCard.textAlign
		endif
		if show_product_count == nil
				assign show_product_count = true
		endif

    if ratio == nil or ratio == 'inherit'
        assign ratio = collectionCard.imageRatio
    endif
    if ratio == 'adapt'
        if image != blank
            assign w = image_width | times: 1.0
            assign h = image_height | times: 1.0
            assign ratio = w | divided_by: h
        else
            assign ratio = collection_image.aspect_ratio
        endif
    endif
    if ratio == '1:1'
        assign ratio = '1'
    endif

    if collectionCard.backgroundColor.value != nil or collectionCard.backgroundColor.value != blank
        assign backgroundColor = collectionCard.backgroundColor.value
    endif

    assign collection_title = title | default: collection.title
    assign product_count = collection.all_products_count | default: 0

    assign locales = shop.metafields.foxify.locales.value
    assign current_locale = request.locale.iso_code
    assign primary_locale = current_locale
    for locale in shop.published_locales
        if locale.primary
            assign primary_locale = locale.iso_code
            break
        endif
    endfor
    assign translation = locales[current_locale] | default: locales[primary_locale]
-%}

<div
    class="{% unless ELEMENT_KEY == 'x' %}{{ prefix_class }}collection-card{% endunless %}{% unless show_product_count == true %} {{ prefix_class }}collection-card--hide-count{% endunless %} {{ prefix_class }}collection-card--style-{{ cardStyle }} {{ prefix_class }}collection-card--align-{{ text_align }} {{ prefix_class }}image--hover-effect{% if backgroundColor != blank %} {{ prefix_class }}collection-card--has-bg{% endif %}"
>
    <a title="{{ collection.title }}" href="{{ collection.url | default: "#" }}" class="{{ prefix_class }}collection-card__wrapper">
        {%- if cardStyle == '3' -%}
            <h3 class="{{ prefix_class }}collection-card__title {{ prefix_class }}gs-card-title {{ prefix_class }}text-current">{{ collection_title | default: default_label }}</h3>
        {%- endif -%}
        <div class="{{ prefix_class }}collection-card__image-wrapper {{ prefix_class }}card {{ prefix_class }}collection-card__boxed {{ prefix_class }}overflow-hidden">
            {% unless collection_image == blank %}
                {% if image != blank %}
                    <{{ element_key }}-image class="{{ prefix_class }}image {{ prefix_class }}collection-card__image" data-image-loading style="--{{ element_key }}-aspect-ratio: {{ ratio | default: 1 }}">
                        <img src="{{ image }}" loading="lazy" width="{{ image_width }}" height="{{ image_height }}" />
                    </{{ element_key }}-image>
                {% else %}
                    <{{ element_key }}-image class="{{ prefix_class }}image {{ prefix_class }}collection-card__image" data-image-loading style="--{{ element_key }}-aspect-ratio: {{ ratio | default: 1 }}">
                        <img
                            srcset="{%- if collection_image.width >= 165 -%}{{ collection_image | image_url: width: 165 }} 165w,{%- endif -%}
                            {%- if collection_image.width >= 360 -%}{{ collection_image | image_url: width: 360 }} 360w,{%- endif -%}
                            {%- if collection_image.width >= 533 -%}{{ collection_image | image_url: width: 533 }} 533w,{%- endif -%}
                            {%- if collection_image.width >= 720 -%}{{ collection_image | image_url: width: 720 }} 720w,{%- endif -%}
                            {%- if collection_image.width >= 940 -%}{{ collection_image | image_url: width: 940 }} 940w,{%- endif -%}
                            {%- if collection_image.width >= 1066 -%}{{ collection_image | image_url: width: 1066 }} 1066w,{%- endif -%}
                            {{ collection_image | image_url }} {{ collection_image.width }}w"
                            src="{{ collection_image | image_url: width: 533 }}"
                            sizes="(min-width: 1200px) 360px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)"
                            alt="{{ collection_image.alt | default: product.title | escape }}"
                            class="motion-reduce"
                            loading="lazy"
                            width="533"
                            height="{{ 533 | divided_by: collection_image.aspect_ratio | round }}">
                    </{{ element_key }}-image>
                {% endif %}
            {% else %}
                {% liquid
                    assign aspect_ratio = ratio | default: "1/1"
                    if aspect_ratio == 'adapt'
                        assign aspect_ratio = '1/1'
                    endif
                %}
                <div class="{{ prefix_class }}collection-card__image" data-ratio="{{ aspect_ratio }}" style="--{{ element_key }}-aspect-ratio: {{ aspect_ratio }}">
                    {% capture current %}{% cycle 1, 2, 3, 4 %}{% endcapture %}
                    {{ 'collection-apparel-' | append: current | placeholder_svg_tag: 'f:placeholder-svg' }}
                </div>
            {% endunless %}
        </div>
        {%- assign default_label = translation.onboarding.collection_title -%}
        <div class="{{ prefix_class }}collection-card__info">
            {%- if cardStyle != '3' -%}
                <h3 class="{{ prefix_class }}collection-card__title {{ prefix_class }}gs-card-title {{ prefix_class }}text-current">
                    {{- collection_title | default: default_label -}}
                    {%- if cardStyle == '2' and show_product_count -%}<div class="{{ prefix_class }}collection-card__number-count">{{ product_count }}</div>{%- endif -%}
                </h3>
            {%- endif -%}

            {%- if cardStyle != '2' and show_product_count -%}
                <div class="{{ prefix_class }}collection-card__number-count">
                    {% liquid
                        assign label = translation.sections.collection_list.product_count
                        if product_count > 1
                            echo label.other | replace: '{{ count }}', product_count
                        else
                            echo label.one | replace: '{{ count }}', product_count
                        endif
                    %}
                </div>
            {%- endif -%}

            {%- if cardStyle == '4' -%}
                <span class="{{ prefix_class }}collection-card__btn">
                    <svg width="22" height="22" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.8125 9H15.1875" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
                        <path
                        d="M10.125 3.9375L15.1875 9L10.125 14.0625"
                        stroke="currentColor"
                        strokeWidth="1.5"
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        />
                    </svg>
                </span>
            {%- endif -%}
        </div>
    </a>
</div>
