{% comment %}
  This file is auto-generated by Foxify.
  This file can be re-written at any time. Please do not update this file directly.
{% endcomment %}

{% liquid
  assign locales = shop.metafields.foxify.locales.value
  assign current_locale = request.locale.iso_code
  assign primary_locale = current_locale
  for locale in shop.published_locales
    if locale.primary
      assign primary_locale = locale.iso_code
      break
    endif
  endfor
  assign translation = locales[current_locale] | default: locales[primary_locale]
%}

<script src='{{ 'foxify-localization-form.js' | asset_url }}' defer='defer'></script>
{% if formType == 'language' %}
  {% assign languageFormId = 'localization-language-' | append: id %}
  <div class='x-disclosure__wrapper' data-disclosure>
    {%- form 'localization', id: languageFormId, class: 'x-localization-form', data-disclosure-form: '' -%}
      <h2 class='x-visually-hidden' id='LanguageLabel-{{ id }}'>
        {{- translation.localization.language_label -}}
      </h2>
      <button
        type='button'
        class='x-disclosure__toggle'
        aria-expanded='false'
        aria-controls='LanguageList-{{ id }}'
        aria-describedby='LanguageLabel-{{ id }}'
        data-disclosure-toggle
      >
        <span>{{ localization.language.endonym_name | capitalize }}</span>
        <svg class='x-icon' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'>
          <path
            fill="currentColor"
            fillRule="evenodd"
            d="M9.354.646a.5.5 0 0 0-.708 0L5 4.293 1.354.646a.5.5 0 0 0-.708.708l4 4a.5.5 0 0 0 .708 0l4-4a.5.5 0 0 0 0-.708"
            clipRule="evenodd"
          />
        </svg>
      </button>
      <div
        id='LanguageList-{{ id }}'
        class='x-disclosure-list x-disclosure-list__right x-list-none x-scroll-container x-text-left'
        data-disclosure-list
      >
        {%- for language in localization.available_languages -%}
          <div
            class='x-disclosure-list__item{% if language.iso_code == localization.language.iso_code %} x-disclosure-list__item--current{% endif %}'
            tabIndex='-1'
            data-disclosure-item
          >
            <a
              class='x-disclosure-list__option'
              href='#'
              hrefLang='{{ language.iso_code }}'
              lang='{{ language.iso_code }}'
              data-value='{{ language.iso_code }}'
              data-disclosure-option
            >
              <span
                class='
                  {% if language.iso_code != localization.language.iso_code %}
                    x-visibility-hidden
                  {% endif %}
                '
              >
                <svg xmlns='http://www.w3.org/2000/svg' fill='none' class='x-icon' viewBox='0 0 12 9'>
                  <path
                    fill="currentColor"
                    fillRule="evenodd"
                    d="M11.35.643a.5.5 0 0 1 .006.707l-6.77 6.886a.5.5 0 0 1-.719-.006L.638 4.845a.5.5 0 1 1 .724-.69l2.872 3.011 6.41-6.517a.5.5 0 0 1 .707-.006z"
                    clipRule="evenodd"
                  />
                </svg>
              </span>
              <span>{{ language.endonym_name | capitalize }}</span>
            </a>
          </div>
        {%- endfor -%}
      </div>
      <input type='hidden' name='locale_code' value='{{ localization.language.iso_code }}' data-disclosure-input>
    {%- endform -%}
  </div>
{% endif %}

{% if formType == 'country' %}
  {% assign countryFormId = 'localization-country-' | append: id %}
  <div class='x-disclosure__wrapper' data-disclosure>
    {%- form 'localization', id: countryFormId, class: 'x-localization-form', data-disclosure-form: '' -%}
      {% assign iso_code = localization.country.iso_code | downcase %}
      <h2 class='x-visually-hidden' id='CountryLabel-{{ id }}'>
        {{- translation.localization.country_label -}}
      </h2>
      <button
        type='button'
        class='x-disclosure__toggle'
        aria-expanded='false'
        aria-controls='CountryList-{{ id }}'
        aria-describedby='CountryLabel-{{ id }}'
        data-disclosure-toggle
      >
        {% if show_flag %}
          <img
            src='https://flagcdn.com/w40/{{ iso_code }}.png'
            srcSet='https://flagcdn.com/w80/{{ iso_code }}.png 2x, https://flagcdn.com/w120/{{ iso_code }}.png 3x'
            class='x-disclosure__flag'
            alt='{{ localization.country.name }}'
            width='24px'
            height='auto'
          >
        {% endif %}
        <span>
          {{ localization.country.name }}
          {% if show_currency -%}
            | {{ localization.country.currency.iso_code -}}
            {{- localization.country.currency.symbol }}
          {% endif %}
        </span>
        <svg class='x-icon' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'>
          <path
            fill="currentColor"
            fillRule="evenodd"
            d="M9.354.646a.5.5 0 0 0-.708 0L5 4.293 1.354.646a.5.5 0 0 0-.708.708l4 4a.5.5 0 0 0 .708 0l4-4a.5.5 0 0 0 0-.708"
            clipRule="evenodd"
          />
        </svg>
      </button>

      <div
        id='CountryList-{{ id }}'
        class='x-disclosure-list x-disclosure-list__right x-list-none x-scroll-container x-text-left x-country-selector'
        data-disclosure-list
      >
        <div class='x-country-filter'>
          <button
            class='x-country-selector__close-button x-hidden'
            type='button'
            aria-label='{{ 'accessibility.close' | t }}'
            data-close-button
          >
            <svg xmlns='http://www.w3.org/2000/svg' fill='none' class='x-icon icon-close' viewBox='0 0 18 17'>
              <path
                fill="currentColor"
                d="M.865 15.978a.5.5 0 0 0 .707.707l7.433-7.431 7.579 7.282a.501.501 0 0 0 .846-.37.5.5 0 0 0-.153-.351L9.712 8.546l7.417-7.416a.5.5 0 1 0-.707-.708L8.991 7.853 1.413.573a.5.5 0 1 0-.693.72l7.563 7.268z"
              />
            </svg>
          </button>
        </div>
        <div class='x-disclosure__list x-country-selector__list' id='country-results-{{ id }}' data-country-results>
          <ul role='list' class='x-list-unstyled x-countries' data-countries>
            {%- for country in localization.available_countries -%}
              <li
                class='
                  x-disclosure-list__item
                  {% if country.iso_code == localization.country.iso_code %}
                    x-disclosure-list__item--current
                  {% endif %}
                '
                tabIndex='-1'
                data-disclosure-item
              >
                <a
                  class='x-disclosure-list__option'
                  href='#'
                  data-value='{{ country.iso_code }}'
                  id='{{ country.name }}'
                  data-disclosure-option
                >
                  <span
                    class='
                      x-disclosure-list__item
                      {% if country.iso_code != localization.country.iso_code %}
                        x-visibility-hidden
                      {% endif -%}
                    '
                  >
                    <svg xmlns='http://www.w3.org/2000/svg' fill='none' class='x-icon' viewBox='0 0 12 9'>
                      <path
                        fill="currentColor"
                        fillRule="evenodd"
                        d="M11.35.643a.5.5 0 0 1 .006.707l-6.77 6.886a.5.5 0 0 1-.719-.006L.638 4.845a.5.5 0 1 1 .724-.69l2.872 3.011 6.41-6.517a.5.5 0 0 1 .707-.006z"
                        clipRule="evenodd"
                      />
                    </svg>
                  </span>
                  <span class='x-country' data-country>{{- country.name }}</span>
                  <span class='x-localization-form__currency motion-reduce'>
                    ({{ country.currency.iso_code }}
                    {{ country.currency.symbol }})
                  </span>
                </a>
              </li>
            {%- endfor -%}
          </ul>
        </div>
      </div>
      <input type='hidden' name='country_code' value='{{ localization.country.iso_code }}' data-disclosure-input>
    {%- endform -%}
  </div>
{% endif %}
