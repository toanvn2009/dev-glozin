{% comment %}
  This file is auto-generated by Foxify.
  This file can be re-written at any time. Please do not update this file directly.
{% endcomment %}
{% liquid
  assign element_key = ELEMENT_KEY | default: 'f'
  assign prefix_class = PREFIX_CLASS | default: 'f:'
  assign custom_class = CUSTOM_CLASS | default: ''
  assign articleCard = ''
  assign theme_settings = shop.metafields.foxify.theme_settings.value
  if theme_settings != blank
    assign articleCard = theme_settings.articleCard
  endif
  assign cardStyle = card_style
  assign ratio = image_ratio
  assign showBlog = articleCard.showBlog
  assign showDate = articleCard.showDate
  assign showReadmore = articleCard.showReadmore
  assign showExcerpt = articleCard.showExcerpt
  if ratio == null or ratio == 'inherit'
    assign ratio = articleCard.imageRatio
  endif
  if ratio == 'adapt'
    assign ratio = article.image.aspect_ratio
  endif

  if ratio == '1:1'
    assign ratio = '1'
  endif
  if text_align == '' or text_align == null or text_align == 'undefined'
    assign text_align = articleCard.textAlign
  endif

  if cardStyle == null or cardStyle == 'inherit'
    assign cardStyle = articleCard.style
  endif

  assign backgroundColor = ''
  if articleCard.backgroundColor.value != null or articleCard.backgroundColor.value != blank
    assign backgroundColor = articleCard.backgroundColor.value
  endif

  assign locales = shop.metafields.foxify.locales.value
  assign current_locale = request.locale.iso_code
  assign primary_locale = current_locale
  for locale in shop.published_locales
    if locale.primary
      assign primary_locale = locale.iso_code
      break
    endif
  endfor
  assign translation = locales[current_locale] | default: locales[primary_locale]
  assign default_title = translation.onboarding.blog_title
  assign default_date = 'now' | date: '%b %d, %y'
%}
<div
  class='{{ prefix_class }}article-card {{ prefix_class }}image--hover-effect {{ prefix_class }}article-card--align-{{ text_align }} {{ prefix_class }}article-card--style-{{ cardStyle | default: '1' }} {{ prefix_class }}relative{% if backgroundColor != blank %} {{ prefix_class }}article-card--has-bg{% endif %} {{ custom_class }}'
>
  <div class='{{ prefix_class }}article-card__image {{ prefix_class }}block {{ prefix_class }}overflow-hidden {{ prefix_class }}relative {{ prefix_class }}card'>
    <a href='{{ article.url }}' class='{{ prefix_class }}full-width-link'
      ><span class='{{ prefix_class }}visually-hidden'>{{ article.title | default: default_title }}</span></a
    >
    <{{ element_key }}-image class='{{ prefix_class }}image' data-image-loading style='--{{ element_key }}-aspect-ratio: {{ ratio | default: 1 }}'>
      {% if article.image %}
        <img
          srcset='
            {%- if article.image.width >= 165 -%}{{ article.image | image_url: width: 165 }} 165w,{%- endif -%}
            {%- if article.image.width >= 360 -%}{{ article.image | image_url: width: 360 }} 360w,{%- endif -%}
            {%- if article.image.width >= 533 -%}{{ article.image | image_url: width: 533 }} 533w,{%- endif -%}
            {%- if article.image.width >= 720 -%}{{ article.image | image_url: width: 720 }} 720w,{%- endif -%}
            {%- if article.image.width >= 940 -%}{{ article.image | image_url: width: 940 }} 940w,{%- endif -%}
            {%- if article.image.width >= 1066 -%}{{ article.image | image_url: width: 1066 }} 1066w,{%- endif -%}
            {%- if article.image.width >= 1500 -%}{{ article.image | image_url: width: 1500 }} 1500w,{%- endif -%}
            {{ article.image | image_url }} {{ article.image.width }}w
          '
          src='{{ article.image | image_url: width: 533 }}'
          sizes='(min-width: 1200px) 360px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)'
          alt='{{ article.image.alt | default: article.title | escape }}'
          loading='lazy'
          class='{{ image_class }}'
          width='{{ article.image.width }}'
          height='{{ article.image.height }}'
        >
      {% else %}
        {{ 'image' | placeholder_svg_tag: 'f:placeholder-svg' }}
      {% endif %}
    </{{ element_key }}-image>
  </div>
  <div class='{{ prefix_class }}article-card__info{% if article.image %} {{ prefix_class }}article-card__info--has-image{% endif %}'>
    {% if showBlog or showDate %}
      <div class='{{ prefix_class }}article-card__meta'>
        {% if showDate %}
          <span class='{{ prefix_class }}article-card__meta-item {{ prefix_class }}article-card__date'>
            {{ article.published_at | time_tag: format: 'date' | default: default_date }}
          </span>
        {% endif %}
        {% if showDate and showBlog %}<span class='{{ prefix_class }}article-card__meta-sep'></span>{% endif %}
        {% if showBlog %}
          <a class='{{ prefix_class }}article-card__meta-item {{ prefix_class }}article-card__blog' href='{{ blog.url }}'>
            {{ blog.title }}
          </a>
        {% endif %}
      </div>
    {% endif %}
    <h3 class='{{ prefix_class }}article-card__title {{ prefix_class }}gs-card-title'>
      <a href='{{ article.url }}' title='{{ article.title }}'>{{ article.title | escape | default: default_title }}</a>
    </h3>
    {% if showExcerpt %}
      <div class='{{ prefix_class }}article-card__excerpt'>
        {% if article.excerpt.size > 0 %}
          {{ article.excerpt | strip_html | truncatewords: 22 }}
        {% else %}
          {{ article.content | strip_html | truncatewords: 22 }}
        {% endif %}
        {% if onboarding %}
          {{ translation.onboarding.blog_excerpt }}
        {% endif %}
      </div>
    {% endif %}
    {% if showReadmore %}
      {% assign ariaLabel = translation.blogs.article.read_more_title | replace: '{{ title }}', article.title %}
      <a
        href='{{ article.url }}'
        class='{{ prefix_class }}gs-link-button {{ prefix_class }}article-card__readmore {{ prefix_class }}text-normal'
        aria-label='{{ ariaLabel }}'
      >
        {{ translation.blogs.article.read_more }}
      </a>
    {% endif %}
  </div>
  {% unless content == blank %}
    <div class='{{ prefix_class }}article-card__extra-content'>{{- content -}}</div>
  {% endunless %}
</div>
