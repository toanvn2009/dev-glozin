{% comment %}
  This file is auto-generated by Foxify.
  This file can be re-written at any time. Please do not update this file directly.
{% endcomment %}
{% liquid
  assign element_key = ELEMENT_KEY | default: 'f'
  assign prefix_class = PREFIX_CLASS | default: 'f:'
  assign button_class = prefix_class | append: 'btn'
  assign show_content = SHOW_CONTENT | default: true
  assign custom_class = CUSTOM_CLASS | default: ''
  assign isGen2 = false

  unless product and product_handle == blank
    assign product = all_products[product_handle]
  endunless

  if prefix_class == 'x-'
    assign button_class = prefix_class | append: 'button'
    assign isGen2 = true
  endif

  assign locales = shop.metafields.foxify.locales.value
  assign current_locale = request.locale.iso_code
  assign primary_locale = current_locale
  for locale in shop.published_locales
    if locale.primary
      assign primary_locale = locale.iso_code
      break
    endif
  endfor
  assign translation = locales[current_locale] | default: locales[primary_locale]

  assign productCard = ''
  assign theme_settings = shop.metafields.foxify.theme_settings.value
  if theme_settings != blank
    assign productCard = theme_settings.productCard
  endif

  assign hextom_usb = shop.metafields.foxify['hextom-usb'].value

  assign cardStyle = card_style
  assign ratio = image_ratio

  assign show_atc = productCard.showQuickAdd
  assign show_on_sale_badge = productCard.showSaleBadge
  assign show_soldout = productCard.showSoldOut
  assign saleBadgeType = productCard.saleBadgeType

  assign variant = product.selected_or_first_available_variant
  assign compare_at_price = variant.compare_at_price
  assign price = variant.price
  assign discount = ''
  assign amount = ''
  assign on_sale = false
  if compare_at_price > price
    assign on_sale = true
    assign discount = compare_at_price | minus: price | times: 100 | divided_by: compare_at_price
    assign amount = compare_at_price | minus: price | money
  endif

  unless on_sale
    assign show_on_sale_badge = false
  endunless

  if show_vendor == null
    assign show_vendor = productCard.showVendor
  endif

  if show_product_option == null
    assign show_product_option = productCard.showColorSwatches
  endif

  assign preview_image = product.featured_media

  if product.selected_variant.image != null
    assign preview_image = product.selected_variant.image
  endif

  if preview_image == blank and productCard.placeholderImage.file_name != blank
    assign preview_image = images[productCard.placeholderImage.file_name]
  endif

  assign second_image = ''
  if productCard.showSecondImage and product.images.size > 1 and product.images[1] != blank
    assign second_image = product.images[1]
  endif

  if ratio == null or ratio == 'inherit'
    assign ratio = productCard.imageRatio
  endif
  if ratio == 'adapt'
    assign ratio = preview_image.aspect_ratio
  endif
  if ratio == '1:1'
    assign ratio = '1'
  endif
  if cardStyle == null or cardStyle == 'inherit'
    assign cardStyle = productCard.style
  endif

  assign textAlign = text_align

  if text_align == '' or textAlign == null or text_align == 'undefined'
    assign text_align = productCard.textAlign
  endif

  assign backgroundColor = ''
  if productCard.backgroundColor.value != null or productCard.backgroundColor.value != blank
    assign backgroundColor = productCard.backgroundColor.value
  endif

  assign enableAjax = false
  assign ajaxCart = shop.metafields.foxify['ajax-add-to-cart'].value
  if ajaxCart != blank and ajaxCart.enabled == true
    assign enableAjax = true
  endif

  assign show_quickview = false
  assign quickView = shop.metafields.foxify['product-quick-view'].value
  if quickView != blank and quickView.enabled == true
    assign show_quickview = true
  endif

  assign hideTitle = hide_title | default: false
  assign atcClass = ''
  unless product.available
    assign atcClass = ' !f:hidden !x-hidden'
  endunless

  assign atcText = translation.products.product.add_to_cart
  unless variant.available
    assign atcText = translation.products.product.sold_out
  endunless

  assign quick_add_class = ''
  if cardStyle == '1'
    assign quick_add_class = prefix_class | append: 'gs-white-button'
  elsif cardStyle == '2'
    assign quick_add_class = prefix_class | append: 'gs-link-button'
  elsif cardStyle == '4'
    assign quick_add_class = prefix_class | append: 'gs-outline-button'
  else
    assign quick_add_class = prefix_class | append: 'gs-primary-button'
  endif

  # Color swatch
  assign colorSwatch = shop.metafields.foxify['product-options-swatches'].value
  assign colorSwatchTrigger = colorSwatch.color_swatch_trigger
%}
{% capture cart_icon %}
  <svg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' focusable='false' role='presentation' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='{{ prefix_class }}icon-svg {{ prefix_class }}icon-shopping-cart'><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
{% endcapture %}

{% capture spinner_icon %}
  <svg aria-hidden='true' class='{{ prefix_class }}icon-svg {{ prefix_class }}spinner-icon' viewBox='0 0 66 66' xmlns='http://www.w3.org/2000/svg'><circle fill="none" cx="33" cy="33" r="30"/></svg>
{% endcapture %}

{%- capture eye_icon -%}
  <svg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' focusable='false' role='presentation' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='{{ prefix_class }}icon-svg {{ prefix_class }}icon-eye'><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
{%- endcapture -%}

{%- capture more_icon -%}
  <svg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' focusable='false' role='presentation' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='{{ prefix_class }}icon-svg {{ prefix_class }}icon-more-horizontal'><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
{%- endcapture -%}

{%- capture atc_button -%}
  <button
    class="{{ prefix_class }}product-card__atc {{ button_class }} {{ quick_add_class }}"
    name="add"
    {% if variant.available == false %}
      disabled="true"
    {% endif %}
    aria-label="{{ atcText }}"
  >
    {% unless atcText == blank %}
      <span class="{{ prefix_class }}product-card__atc-text">
        {{- atcText -}}
      </span>
    {%- endunless -%}
    <span class="{{ prefix_class }}product-card__atc-icon {{ prefix_class }}hidden">
      {{- cart_icon -}}
    </span>
    {{- spinner_icon -}}
  </button>
{%- endcapture -%}

{%- capture buy_buttons -%}
  {%- if product.has_only_default_variant -%}
    <{{ element_key }}-product-form
      class="{{ prefix_class }}product-form {{ prefix_class }}w-full{{ atcClass }}"
      data-enable-ajax="true"
      data-notification-type="toast"
      data-variant-id="{{ variant.id }}"
      data-product-id="{{ product.id }}"
      data-in-card="true"
    >
      {%- if isGen2 -%}
        {{- atc_button -}}
      {%- else -%}
        {%- form 'product', product, id: product_form_id, class: 'product-card-form', novalidate: 'novalidate' -%}
          <input type="hidden" name="id" value="{{ variant.id }}">
          {{- atc_button -}}
        {%- endform -%}
      {%- endif -%}
    </{{ element_key }}-product-form>
  {% else %}
    <a
      href="{{- product.url -}}"
      class="{{ prefix_class }}product-card__atc {{ button_class }}{{ atcClass }} {{ quick_add_class }}"
    >
      <span class="{{ prefix_class }}product-card__atc-text">
        {{- translation.products.product.select_options -}}
      </span>
      <span class="{{ prefix_class }}product-card__atc-icon {{ prefix_class }}hidden">
        {{- more_icon -}}
      </span>
    </a>
  {%- endif -%}
{%- endcapture -%}

{%- capture quickview_button -%}
  <button
    class='{{ button_class }} {{ prefix_class }}gs-white-button {{ prefix_class }}product-card__quickview'
    aria-label='{{ translation.products.product.quick_view }}'
    data-product-quickview='{{ product.handle }}'
    data-gen2='{{ isGen2 }}'
  >
    {% if cardStyle == '5' or cardStyle == '6' -%}
      <span>{{ translation.products.product.quick_view }}</span>
    {%- else -%}
      <span>
        {{ eye_icon }}
      </span>
    {%- endif %}
    {{ spinner_icon }}
  </button>
{%- endcapture -%}

{% unless onboarding %}
  <div
    class='{{ prefix_class }}product-card {{ prefix_class }}product-card--style-{{ cardStyle }} {{ prefix_class }}product-card--align-{{ text_align }}{% if backgroundColor != blank %} {{ prefix_class }}product-card--has-bg{% endif %} {{ custom_class }}'
  >
    <div class='{{ prefix_class }}product-card__wrapper{% if second_image == blank %} {{ prefix_class }}image--hover-effect{% endif %}'>
      <a href='{{ product.url }}' class='{{ prefix_class }}full-width-link {{ prefix_class }}product-card__link'>
        <span class='{{ prefix_class }}visually-hidden'>{{- product.title -}}</span>
      </a>
      <div class='{{ prefix_class }}product-card__image-wrapper{% if second_image == blank %} {{ prefix_class }}product-card__image-wrapper--main-only{% endif %}'>
        {% if preview_image != blank %}
          <{{ element_key }}-image
            class='{{ prefix_class }}image {{ prefix_class }}product-card__image {{ prefix_class }}product-card__image--main'
            data-image-loading
            style='--{{ element_key }}-aspect-ratio: {{ ratio | default: 1 }}'
          >
            <img
              srcset='
                {%- if preview_image.width >= 165 -%}{{ preview_image | image_url: width: 165 }} 165w,{%- endif -%}
                {%- if preview_image.width >= 360 -%}{{ preview_image | image_url: width: 360 }} 360w,{%- endif -%}
                {%- if preview_image.width >= 533 -%}{{ preview_image | image_url: width: 533 }} 533w,{%- endif -%}
                {%- if preview_image.width >= 720 -%}{{ preview_image | image_url: width: 720 }} 720w,{%- endif -%}
                {%- if preview_image.width >= 940 -%}{{ preview_image | image_url: width: 940 }} 940w,{%- endif -%}
                {%- if preview_image.width >= 1066 -%}{{ preview_image | image_url: width: 1066 }} 1066w,{%- endif -%}
                {{ preview_image | image_url }} {{ preview_image.width }}w
              '
              src='{{ preview_image | image_url: width: 533 }}'
              sizes='(min-width: 1200px) 360px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)'
              alt='{{ preview_image.alt | default: product.title | escape }}'
              class='motion-reduce'
              loading='lazy'
              width='533'
              height='{{ 533 | divided_by: preview_image.aspect_ratio | round }}'
            >
          </{{ element_key }}-image>
          {% unless second_image == blank %}
            <{{ element_key }}-image
              class='{{ prefix_class }}image {{ prefix_class }}image--no-zoom {{ prefix_class }}product-card__image {{ prefix_class }}product-card__image--second {{ prefix_class }}inset-full {{ prefix_class }}hidden md:{{ prefix_class }}block'
              data-image-loading
              style='--{{ element_key }}-aspect-ratio: {{ ratio }}'
            >
              <img
                srcset='
                  {%- if second_image.width >= 165 -%}{{ second_image | image_url: width: 165 }} 165w,{%- endif -%}
                  {%- if second_image.width >= 360 -%}{{ second_image | image_url: width: 360 }} 360w,{%- endif -%}
                  {%- if second_image.width >= 533 -%}{{ second_image | image_url: width: 533 }} 533w,{%- endif -%}
                  {%- if second_image.width >= 720 -%}{{ second_image | image_url: width: 720 }} 720w,{%- endif -%}
                  {%- if second_image.width >= 940 -%}{{ second_image | image_url: width: 940 }} 940w,{%- endif -%}
                  {%- if second_image.width >= 1066 -%}{{ second_image | image_url: width: 1066 }} 1066w,{%- endif -%}
                  {{ second_image | image_url }} {{ second_image.width }}w
                '
                class='motion-reduce'
                src='{{ second_image | image_url: width: 533 }}'
                sizes='(min-width: {{ settings.container_width }}px) {{ settings.container_width | minus: 130 | divided_by: 4 }}px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)'
                alt='{{ second_image.alt | default: product.title | escape }}'
                loading='lazy'
                width='{{ 533 }}'
                height='{{ 533 | divided_by: second_image.aspect_ratio | round }}'
              >
            </{{ element_key }}-image>
          {% endunless %}
        {% else %}
          <div
            class='{{ prefix_class }}product-card__image {{ prefix_class }}product-card__image--main'
            style='--{{ element_key }}-aspect-ratio: {{ ratio | default: 1 }};'
          >
            {% capture current %}{% cycle 1, 2, 3, 4 %}{% endcapture %}
            {{ 'product-apparel-' | append: current | placeholder_svg_tag: 'f:placeholder-svg' }}
          </div>
        {% endif %}

        {%- if product.available == false or on_sale -%}
          <div class='{{ prefix_class }}product-card__badge'>
            {%- if product.available == false and show_soldout -%}
              <span class='{{ prefix_class }}badge {{ prefix_class }}badge--soldout' aria-hidden='true'>
                {{ translation.products.product.sold_out }}
              </span>
            {% endif %}
            {%- if show_on_sale_badge and product.available -%}
              <span class='{{ prefix_class }}badge {{ prefix_class }}badge--sale' aria-hidden='true'>
                {%- if saleBadgeType == 'percentage' -%}
                  -
                  {{- discount -}}
                  %
                {%- endif -%}
                {% liquid
                  if saleBadgeType == 'text'
                    echo translation.products.product.on_sale
                  endif
                  if saleBadgeType == 'amount'
                    echo translation.products.product.price.save_price_html | replace: '{{ amount }}', amount
                  endif
                %}
              </span>
            {%- endif -%}
          </div>
        {% endif %}
        {% if cardStyle == '2' or cardStyle == '4' %}
          {% if show_quickview %}
            {{- quickview_button -}}
          {% endif %}
        {% elsif cardStyle == '3' %}
          {% if show_atc %}
            <div class='{{ prefix_class }}product-card__actions {{ prefix_class }}hidden md:{{ prefix_class }}flex'>
              {{- buy_buttons -}}
            </div>
          {% endif %}
          {% if show_quickview %}
            {{- quickview_button -}}
          {% endif %}
        {% elsif cardStyle == '6' %}
          {% comment %} Do nothing {% endcomment %}
        {% else %}
          {% if show_atc or show_quickview %}
            <div class='{{ prefix_class }}product-card__actions {{ prefix_class }}hidden md:{{ prefix_class }}flex'>
              {% if show_atc %}
                {{- buy_buttons -}}
              {% endif %}
              {% if show_quickview %}
                {{- quickview_button -}}
              {% endif %}
            </div>
          {% endif %}
        {% endif %}
      </div>
      <div class='{{ prefix_class }}product-card__info'>
        {%- if show_vendor and product.vendor -%}
          <span class='{{ prefix_class }}product-card__vendor {{ prefix_class }}text-upper'>
            {{- product.vendor -}}
          </span>
        {%- endif -%}
        {% render 'foxify-product-card-hook', product: product, PREFIX_CLASS: prefix_class %}
        <div class='{{ prefix_class }}product-card__summary'>
          {% if hideTitle != true %}
            <h3 class='{{ prefix_class }}product-card__title {{ prefix_class }}gs-card-title h6'>
              {{- product.title -}}
            </h3>
          {% endif %}
          {% render 'foxify-price', product: product, alignment: textAlign, translation: translation, PREFIX_CLASS: prefix_class %}
        </div>
        {% if cardStyle == '2' or cardStyle == '4' %}
          {% if show_atc %}
            <div class='{{ prefix_class }}product-card__actions {{ prefix_class }}flex'>
              {{- buy_buttons -}}
            </div>
          {% endif %}
        {% elsif cardStyle == '6' %}
          {% if show_atc or show_quickview %}
            <div class='{{ prefix_class }}product-card__actions {{ prefix_class }}flex'>
              {% if show_atc %}
                {{- buy_buttons -}}
              {% endif %}
              {% if show_quickview %}
                {{- quickview_button -}}
              {% endif %}
            </div>
          {% endif %}
        {% endif %}
      </div>
      {% if productCard.content != blank and show_content %}
        <div class='{{ prefix_class }}product-card__extra-content'>{{ productCard.content }}</div>
      {% endif %}
      {% unless content == blank %}
        <div class='{{ prefix_class }}product-card__extra-content'>{{- content -}}</div>
      {% endunless %}
      {% if cardStyle == '3' %}<div class='{{ prefix_class }}product-card__expand'></div>{% endif %}
    </div>
  </div>
{% else %}
  <div class='{{ prefix_class }}product-card {{ prefix_class }}product-card--align-{{ textAlign }}'>
    <div class='{{ prefix_class }}product-card__wrapper'>
      <div class='{{ prefix_class }}product-card__image-wrapper {{ prefix_class }}card'>
        <f-image class='{{ prefix_class }}image' style='--aspect-ratio: {{ ratio | default: 1 }};'>
          {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}
          {{ 'product-' | append: current | placeholder_svg_tag: 'f:placeholder-svg' }}
        </f-image>
      </div>
      <div class='{{ prefix_class }}product-card__info'>
        {% if hideTitle != true %}
          <h3 class='{{ prefix_class }}product-card__title {{ prefix_class }}gs-card-title h6'>
            {{ translation.onboarding.product_title }}
          </h3>
        {% endif %}
        {% render 'foxify-price', translation: translation, alignment: textAlign, PREFIX_CLASS: prefix_class %}
      </div>
    </div>
  </div>
{% endunless %}
